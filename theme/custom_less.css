/* Pink Jupyter Theme - A beautiful pink color scheme for Jupyter Notebooks */
/* Modified to only work with nbclassic (body.notebook_app) */
/* Enhanced with collapsible headings and code folding support */

/* Root variables for consistency */
:root {
    --pink-light: #FFF0F5;
    --pink-lighter: #FFF5FB;
    --pink-soft: #FFE4E1;
    --pink-medium: #FFB6C1;
    --pink-hot: #FF69B4;
    --pink-deep: #FF1493;
    --pink-violet: #C71585;
    --burgundy: #8B1538;
    --indigo: #4B0082;
}

/* Main body and container backgrounds - nbclassic only */
body.notebook_app {
    background-color: var(--pink-light) !important;
}

body.notebook_app #notebook {
    background-color: var(--pink-lighter) !important;
}

body.notebook_app #notebook-container {
    background-color: var(--pink-lighter) !important;
    width: 95% !important;
    margin: auto !important;
    padding: 2em !important;
    box-shadow: 0 0 20px rgba(255, 182, 193, 0.3) !important;
}

/* Header */
body.notebook_app #header {
    background-color: var(--pink-medium) !important;
    box-shadow: 0 2px 4px rgba(255, 182, 193, 0.3) !important;
}

body.notebook_app #header-container {
    background-color: var(--pink-medium) !important;
}

/* Menu bar */
body.notebook_app #menubar {
    background-color: var(--pink-medium) !important;
}

body.notebook_app #menubar .navbar-nav > li > a {
    color: var(--burgundy) !important;
}

body.notebook_app #menubar .navbar-nav > li > a:hover {
    background-color: var(--pink-hot) !important;
    color: white !important;
}

/* Notebook name */
body.notebook_app #notebook_name {
    color: var(--pink-violet) !important;
    font-weight: bold !important;
}

/* Toolbar */
body.notebook_app .toolbar {
    background-color: var(--pink-soft) !important;
    border-bottom: 1px solid var(--pink-medium) !important;
}

body.notebook_app #maintoolbar {
    background-color: var(--pink-soft) !important;
    border-bottom: 1px solid var(--pink-medium) !important;
    padding: 5px !important;
}

/* All cells - general styling */
body.notebook_app .cell {
    background-color: white !important;
    border: 1px solid var(--pink-soft) !important;
    border-radius: 5px !important;
    margin: 8px 0 !important;
    padding: 5px !important;
}

/* Selected cells */
body.notebook_app .cell.selected {
    border: 2px solid var(--pink-hot) !important;
    box-shadow: 0 0 10px rgba(255, 105, 180, 0.3) !important;
    background-color: #FFFAFA !important;
}

body.notebook_app .cell.selected:before {
    background: var(--pink-hot) !important;
    width: 5px !important;
}

/* Code cells specific */
body.notebook_app .code_cell {
    background-color: white !important;
}

body.notebook_app .code_cell .input {
    background-color: transparent !important;
}

/* Input area */
body.notebook_app .input_area {
    background: var(--pink-lighter) !important;
    border: 1px solid var(--pink-soft) !important;
    border-radius: 3px !important;
    padding: 5px !important;
}

/* CodeMirror editor */
body.notebook_app .CodeMirror, body.notebook_app .jp-CodeMirror {
    background-color: var(--pink-lighter) !important;
    color: var(--indigo) !important;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', monospace !important;
}

body.notebook_app .CodeMirror-gutters, body.notebook_app .jp-CodeMirror-gutters {
    background-color: var(--pink-soft) !important;
    border-right: 1px solid var(--pink-medium) !important;
    z-index: 3 !important;
}

body.notebook_app .CodeMirror-linenumber, body.notebook_app .jp-CodeMirror-linenumber {
    color: #DB7093 !important;
}

body.notebook_app .CodeMirror-cursor, body.notebook_app .jp-CodeMirror-cursor {
    border-left: 2px solid var(--pink-hot) !important;
}

/* === COLLAPSIBLE HEADINGS EXTENSION SUPPORT === */

/* Collapsible headings toggle button styling */
body.notebook_app .collapsible_headings_toggle {
    color: var(--pink-deep) !important;
    opacity: 1 !important;
    z-index: 1000 !important;
    cursor: pointer !important;
    font-size: 14px !important;
    margin-right: 5px !important;
    transition: color 0.3s ease !important;
}

body.notebook_app .collapsible_headings_toggle:hover {
    color: var(--pink-hot) !important;
}

/* Style for collapsed heading cells */
body.notebook_app .collapsible_headings_collapsed {
    border-left: 4px solid var(--pink-hot) !important;
    background-color: var(--pink-light) !important;
    margin-bottom: 10px !important;
}

body.notebook_app .collapsible_headings_collapsed .text_cell_render {
    background-color: var(--pink-light) !important;
    border-left: 3px solid var(--pink-deep) !important;
    padding-left: 15px !important;
}

body.notebook_app .collapsible_headings_collapsed:hover {
    background-color: rgba(255, 105, 180, 0.1) !important;
    transition: background-color 0.3s ease !important;
}

/* Disable the spinning animation for toggle icons */
body.notebook_app .cell .collapsible_headings_toggle .fa {
    transition: transform 0s !important;
}

/* Add visual indicator for collapsed sections */
body.notebook_app .collapsible_headings_collapsed::after {
    content: " [collapsed]" !important;
    color: var(--pink-violet) !important;
    font-style: italic !important;
    font-size: 0.9em !important;
    margin-left: 10px !important;
}

/* === CODE FOLDING EXTENSION SUPPORT === */

/* Code folding gutter styling */
body.notebook_app .CodeMirror-foldgutter,
body.notebook_app .CodeMirror-foldgutter-open,
body.notebook_app .CodeMirror-foldgutter-folded {
    color: var(--pink-violet) !important;
    opacity: 1 !important;
    cursor: pointer !important;
    background-color: var(--pink-soft) !important;
    z-index: 1000 !important;
}

body.notebook_app .CodeMirror-foldgutter-open:after {
    content: "▼" !important;
    color: var(--pink-deep) !important;
}

body.notebook_app .CodeMirror-foldgutter-folded:after {
    content: "▶" !important;
    color: var(--pink-hot) !important;
}

body.notebook_app .CodeMirror-foldgutter:hover {
    background-color: var(--pink-medium) !important;
}

/* Folded code marker styling */
body.notebook_app .CodeMirror-foldmarker {
    background-color: var(--pink-medium) !important;
    color: var(--burgundy) !important;
    border: 1px solid var(--pink-hot) !important;
    border-radius: 3px !important;
    padding: 0 3px !important;
    cursor: pointer !important;
}

body.notebook_app .CodeMirror-foldmarker:hover {
    background-color: var(--pink-hot) !important;
    color: white !important;
}

/* Cell folding support (for nbextension-cellfolding) */
body.notebook_app .cell-fold-toggle {
    color: var(--pink-deep) !important;
    cursor: pointer !important;
    font-size: 12px !important;
    opacity: 0.7 !important;
    transition: opacity 0.3s ease !important;
}

body.notebook_app .cell-fold-toggle:hover {
    opacity: 1 !important;
    color: var(--pink-hot) !important;
}

body.notebook_app .cell.folded {
    background-color: var(--pink-light) !important;
    border-left: 3px solid var(--pink-hot) !important;
    min-height: 30px !important;
}

body.notebook_app .cell.folded .input_area,
body.notebook_app .cell.folded .output_wrapper {
    display: none !important;
}

body.notebook_app .cell.folded::after {
    content: "[Folded cell - click to expand]" !important;
    color: var(--pink-violet) !important;
    font-style: italic !important;
    padding: 10px !important;
    display: block !important;
}

/* Output area */
body.notebook_app .output_wrapper {
    background: white !important;
}

body.notebook_app .output_area {
    background: white !important;
}

body.notebook_app .output_area pre {
    color: var(--indigo) !important;
    background-color: white !important;
    padding: 10px !important;
}

body.notebook_app .output_subarea {
    background: white !important;
    padding: 5px !important;
}

/* Markdown cells */
body.notebook_app .text_cell {
    background-color: white !important;
}

body.notebook_app .text_cell_render {
    color: var(--indigo) !important;
    background-color: var(--pink-lighter) !important;
    padding: 15px !important;
    border-radius: 5px !important;
    font-family: 'Inter', 'Dancing Script', 'Playfair Display', serif !important;
    line-height: 1.6 !important;
    font-size: 16px !important;
}

body.notebook_app .text_cell_render h1,
body.notebook_app .text_cell_render h2,
body.notebook_app .text_cell_render h3,
body.notebook_app .text_cell_render h4,
body.notebook_app .text_cell_render h5,
body.notebook_app .text_cell_render h6 {
    color: var(--pink-violet) !important;
    font-weight: bold !important;
    font-family: 'Inter', 'Dancing Script', 'Playfair Display', serif !important;
    letter-spacing: 0.5px !important;
}

body.notebook_app .text_cell_render h1 {
    border-bottom: 2px solid var(--pink-medium) !important;
    padding-bottom: 10px !important;
}

/* Links in markdown */
body.notebook_app .text_cell_render a {
    color: var(--pink-deep) !important;
}

body.notebook_app .text_cell_render a:hover {
    color: var(--pink-hot) !important;
    text-decoration: underline !important;
}

/* Cell prompts */
body.notebook_app .prompt {
    min-width: 14ex !important;
    background-color: transparent !important;
}

body.notebook_app .input_prompt {
    color: var(--pink-violet) !important;
    font-weight: bold !important;
    background-color: transparent !important;
}

body.notebook_app .output_prompt {
    color: #DB7093 !important;
    background-color: transparent !important;
}

/* JupyterLab specific prompt styling */
body.notebook_app .jp-InputPrompt, body.notebook_app .jp-OutputPrompt {
    background-color: transparent !important;
}

body.notebook_app .jp-InputArea-prompt, body.notebook_app .jp-OutputArea-prompt {
    background-color: transparent !important;
    color: var(--pink-violet) !important;
}

/* Fix for JupyterLab prompt containers */
body.notebook_app div.jp-Cell-inputWrapper div.jp-InputArea-prompt,
body.notebook_app div.jp-Cell-outputWrapper div.jp-OutputArea-prompt {
    background: transparent !important;
    background-color: transparent !important;
}

/* Override any dark backgrounds in prompts */
body.notebook_app .jp-InputArea .jp-InputPrompt,
body.notebook_app .jp-OutputArea .jp-OutputPrompt {
    background: transparent !important;
    background-color: var(--pink-lighter) !important;
}

/* Running indicator */
body.notebook_app .running .prompt {
    background-color: var(--pink-hot) !important;
    color: white !important;
}

/* Syntax highlighting */
body.notebook_app .cm-keyword { color: var(--pink-deep) !important; font-weight: bold !important; }
body.notebook_app .cm-def { color: var(--pink-violet) !important; }
body.notebook_app .cm-variable { color: var(--indigo) !important; }
body.notebook_app .cm-variable-2 { color: var(--indigo) !important; }
body.notebook_app .cm-variable-3 { color: var(--burgundy) !important; }
body.notebook_app .cm-string { color: #DB7093 !important; }
body.notebook_app .cm-operator { color: var(--pink-hot) !important; }
body.notebook_app .cm-comment { color: #BC8F8F !important; font-style: italic !important; }
body.notebook_app .cm-number { color: #FF6347 !important; }
body.notebook_app .cm-atom { color: var(--pink-deep) !important; }
body.notebook_app .cm-builtin { color: var(--pink-violet) !important; }
body.notebook_app .cm-bracket { color: var(--burgundy) !important; }

/* Buttons */
body.notebook_app .btn-default {
    background-color: var(--pink-medium) !important;
    border-color: var(--pink-hot) !important;
    color: var(--burgundy) !important;
}

body.notebook_app .btn-default:hover {
    background-color: var(--pink-hot) !important;
    border-color: var(--pink-deep) !important;
    color: white !important;
}

/* Modal dialogs */
body.notebook_app .modal-content {
    background-color: var(--pink-lighter) !important;
    border: 1px solid var(--pink-medium) !important;
}

body.notebook_app .modal-header {
    background-color: var(--pink-medium) !important;
    color: var(--burgundy) !important;
    border-bottom: 1px solid var(--pink-hot) !important;
}

/* File browser */
body.notebook_app #tab_content {
    background-color: var(--pink-lighter) !important;
}

body.notebook_app .list_container {
    background-color: white !important;
}

body.notebook_app .list_item:hover {
    background-color: var(--pink-soft) !important;
}

body.notebook_app .list_item.selected {
    background-color: var(--pink-medium) !important;
}

/* Tables in output */
body.notebook_app .rendered_html table {
    border: 1px solid var(--pink-medium) !important;
}

body.notebook_app .rendered_html th {
    background-color: var(--pink-medium) !important;
    color: var(--burgundy) !important;
    padding: 8px !important;
}

body.notebook_app .rendered_html tr:nth-child(even) {
    background-color: var(--pink-light) !important;
}

body.notebook_app .rendered_html td {
    padding: 8px !important;
}

/* Scrollbars */
body.notebook_app ::-webkit-scrollbar {
    width: 12px !important;
    height: 12px !important;
}

body.notebook_app ::-webkit-scrollbar-track {
    background: var(--pink-soft) !important;
}

body.notebook_app ::-webkit-scrollbar-thumb {
    background: var(--pink-medium) !important;
    border-radius: 6px !important;
}

body.notebook_app ::-webkit-scrollbar-thumb:hover {
    background: var(--pink-hot) !important;
}

/* Status bar / notification area */
body.notebook_app #notification_area {
    background-color: transparent !important;
}

body.notebook_app .notification_widget {
    color: var(--pink-violet) !important;
}

/* Command mode indicator */
body.notebook_app .command_mode_icon:before {
    color: var(--pink-hot) !important;
}

body.notebook_app .edit_mode_icon:before {
    color: var(--pink-violet) !important;
}

/* Kernel indicator */
body.notebook_app #kernel_indicator {
    color: var(--pink-violet) !important;
}

/* Tooltips */
body.notebook_app .tooltip-inner {
    background-color: var(--pink-hot) !important;
    color: white !important;
}

body.notebook_app .tooltip.top .tooltip-arrow {
    border-top-color: var(--pink-hot) !important;
}

/* Make sure images and plots have proper background */
body.notebook_app .output_png,
body.notebook_app .output_jpeg {
    background-color: white !important;
    padding: 10px !important;
    border-radius: 3px !important;
    display: inline-block !important;
}

/* DataFrame styling */
body.notebook_app .dataframe {
    border: 1px solid var(--pink-medium) !important;
}

body.notebook_app .dataframe thead {
    background-color: var(--pink-medium) !important;
    color: var(--burgundy) !important;
}

body.notebook_app .dataframe thead th {
    background-color: var(--pink-medium) !important;
    color: var(--burgundy) !important;
    font-weight: bold !important;
}

body.notebook_app .dataframe tbody tr:nth-child(even) {
    background-color: #FFF8F8 !important;
}

body.notebook_app .dataframe tbody tr:nth-child(odd) {
    background-color: white !important;
}

body.notebook_app .dataframe tbody td {
    color: var(--indigo) !important;
    padding: 8px !important;
}

/* Error output */
body.notebook_app .output_stderr {
    background-color: #FFE4E1 !important;
    color: #8B0000 !important;
}

body.notebook_app .output_stderr pre {
    background-color: #FFE4E1 !important;
    color: #8B0000 !important;
    border-left: 3px solid var(--pink-hot) !important;
    padding: 10px !important;
}

/* Error traceback */
body.notebook_app .output_subarea.output_error {
    background-color: #FFE4E1 !important;
}

body.notebook_app .output_subarea.output_error pre {
    background-color: #FFE4E1 !important;
    color: #8B0000 !important;
}

body.notebook_app div.output_area div.output_subarea.output_stderr {
    background-color: #FFE4E1 !important;
}

/* ANSI color codes in error output */
body.notebook_app .ansi-red-fg { color: var(--pink-hot) !important; }
body.notebook_app .ansi-red-intense-fg { color: var(--pink-deep) !important; font-weight: bold !important; }
body.notebook_app .ansi-cyan-fg { color: var(--pink-violet) !important; }
body.notebook_app .ansi-cyan-intense-fg { color: var(--burgundy) !important; }
body.notebook_app .ansi-green-fg { color: var(--pink-medium) !important; }
body.notebook_app .ansi-green-intense-fg { color: #DB7093 !important; }

/* Python traceback styling */
body.notebook_app .output_area .output_subarea.output_text.output_error {
    background-color: #FFE4E1 !important;
    padding: 10px !important;
    border-radius: 3px !important;
}

body.notebook_app .output_text.output_error pre {
    background-color: transparent !important;
    color: #8B0000 !important;
}

/* Jupyter error messages */
body.notebook_app div.output_stderr {
    background-color: #FFE4E1 !important;
}

body.notebook_app div.output_stderr pre {
    color: #8B0000 !important;
    background-color: transparent !important;
}

/* Make all error text visible */
body.notebook_app .output_area .output_text pre {
    color: var(--indigo) !important;
}

body.notebook_app .output_area .output_error pre {
    color: #8B0000 !important;
    background-color: #FFE4E1 !important;
    border-radius: 3px !important;
    padding: 10px !important;
}

/* Additional nbclassic specific fixes */
body.notebook_app div#notebook {
    border-top: none !important;
}

body.notebook_app .container {
    width: 98% !important;
}

/* Ensure cell content is visible */
body.notebook_app .inner_cell {
    background-color: transparent !important;
}

body.notebook_app .input_area > .highlight {
    background-color: transparent !important;
}

body.notebook_app .output_area .output_subarea {
    max-width: 100% !important;
}